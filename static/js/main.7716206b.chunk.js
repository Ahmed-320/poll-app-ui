(this["webpackJsonpwould-rather"]=this["webpackJsonpwould-rather"]||[]).push([[0],{100:function(e,t,r){},105:function(e,t,r){"use strict";r.r(t);var s=r(1),n=r(31),o=r.n(n),a=(r(58),r(8)),c=r(2),l=r(3),i=r(5),p=r(4),h="SET_AUTH_USER",u="UPDATE_USER",d="DELETE_USER",j="CREATE_USER",b="CHANGE_PASSWORD";function m(e){var t=e.token,r=e.userId,s=e.name,n=e.email,o=e.imageUrl,a=e.errors;return{type:h,token:t,userId:r,email:n,name:s,imageUrl:o,errors:a}}function g(e){var t=e.userId,r=e.errors;return{type:j,userId:t,errors:r}}function f(e){var t=e.message,r=e.errors;return{type:u,message:t,errors:r}}function O(e,t){return function(r){return fetch("https://infinite-sands-21729.herokuapp.com/auth/user/changePassword",{headers:{Authorization:"Bearer "+t},method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){r(function(e){var t=e.message,r=e.errors;return{type:b,message:t,errors:r}}(e))})).catch((function(e){console.warn("Error in updating the user",e)}))}}function x(e,t){return function(r){return fetch("https://infinite-sands-21729.herokuapp.com/auth/user/delete",{headers:{Authorization:"Bearer "+t},method:"DELETE",body:e}).then((function(e){return e.json()})).then((function(e){r(function(e){var t=e.message,r=e.errors;return{type:d,message:t,errors:r}}(e))})).catch((function(e){console.warn("Error in deleting user",e)}))}}var v=r(9),y=r(7),N=r(11),w=r(0),U=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"mt-3 mb-3 text-center ".concat(this.props.error?"":"hidden"),children:Object(w.jsx)("h1",{className:"inline-block h-10 text-red-400 border-2 border-red-400 rounded-lg w-60",children:this.props.errorMsg})})}}]),r}(s.Component),k=Object(v.b)()(U),P=(r(65),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"setCreateUser",value:function(e){var t=this;e.preventDefault();var r,s=new FormData(e.target);this.props.dispatch((r=s,function(e){return e(g(r)),fetch("https://infinite-sands-21729.herokuapp.com/auth/signup",{method:"PUT",body:r}).then((function(e){return e.json()})).then((function(t){e(g(t))})).catch((function(e){console.warn("Error in saving the answer",e)}))})).then((function(e){t.props.history.push("/login")}))}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(k,{error:this.props.authUser.errors,errorMsg:this.props.authUser.errors?this.props.authUser.errors.msg:""}),Object(w.jsx)("div",{className:"signupContainer",children:Object(w.jsxs)("div",{className:"grid w-full gap-8 justify-items-center",children:[Object(w.jsxs)("section",{className:"w-full text-center bg-gray-100",children:[Object(w.jsx)("h1",{className:"font-bold",children:"Welcome"}),Object(w.jsx)("h2",{children:"Please sign up to vote for polls or to create your own poll"})]}),Object(w.jsx)("h1",{children:Object(w.jsx)("b",{children:"Sign Up"})}),Object(w.jsxs)("form",{method:"post",id:"form",className:"grid grid-flow-row gap-5",onSubmit:this.setCreateUser.bind(this),children:[Object(w.jsx)("input",{className:"signUpInput",name:"name",type:"text",placeholder:"Enter your name"}),Object(w.jsx)("input",{className:"signUpInput",name:"email",type:"email",placeholder:"Enter a valid email adress"}),Object(w.jsx)("label",{htmlFor:"imageUrl",className:"font-bold text-gray-700",children:"Select an image"}),Object(w.jsx)("input",{className:"signUpImgInput",name:"imageUrl",id:"imageUrl",type:"file"}),Object(w.jsx)("input",{className:"signUpInput",name:"password",type:"password",placeholder:"Enter your password"}),Object(w.jsx)("input",{className:"signUpInput",name:"confirmPassword",type:"password",placeholder:"Confirm your password"}),Object(w.jsx)("button",{className:"mb-4 font-bold text-white bg-blue-500 rounded-lg",type:"submit",children:"Signup"}),Object(w.jsxs)("p",{className:"mb-4",children:["Already have an account ? ",Object(w.jsx)(y.b,{to:"/login",className:"h-8 text-center transition rounded-sm hover:text-blue-500",children:"Login"})]})]})]})})]})}}]),r}(s.Component));var I=Object(N.f)(Object(v.b)((function(e){return{authUser:e.authUser}}))(P)),E=(r(69),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={authUser:e.props.authUser},e}return Object(l.a)(r,[{key:"LoginUser",value:function(e){e.preventDefault();var t,r=new FormData(e.target);this.props.dispatch((t=r,function(e){return fetch("https://infinite-sands-21729.herokuapp.com/auth/login",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(t){e(m(t))})).catch((function(t){console.warn("Error in saving the answer",t),e(m({}))}))}))}},{key:"componentDidUpdate",value:function(){this.props.authUser.token&&(this.loginHandler(),this.props.authUser.errors||this.props.history.push("/"))}},{key:"loginHandler",value:function(){localStorage.setItem("token",this.props.authUser.token),localStorage.setItem("userId",this.props.authUser.userId),localStorage.setItem("name",this.props.authUser.name),localStorage.setItem("email",this.props.authUser.email),localStorage.setItem("imageUrl",this.props.authUser.imageUrl);var e=new Date((new Date).getTime()+36e5);localStorage.setItem("expiryDate",e.toISOString())}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"loginContainer",children:[Object(w.jsx)(k,{error:this.props.authUser.errors,errorMsg:this.props.authUser.errors?this.props.authUser.errors.msg:""}),Object(w.jsxs)("div",{className:"grid w-full gap-8 justify-items-center",children:[Object(w.jsxs)("section",{className:"w-full text-center bg-gray-200",children:[Object(w.jsx)("h1",{className:"font-bold",children:"Welcome"}),Object(w.jsx)("h2",{children:"Please login to continue"})]}),Object(w.jsx)("h1",{children:Object(w.jsx)("b",{children:"Login"})}),Object(w.jsxs)("form",{method:"post",id:"form",className:"grid grid-flow-row gap-5",onSubmit:this.LoginUser.bind(this),children:[Object(w.jsx)("input",{className:"loginInput",name:"email",type:"email",placeholder:"Enter a valid email adress"}),Object(w.jsx)("input",{className:"loginInput",name:"password",type:"password",placeholder:"Enter your password"}),Object(w.jsx)("button",{className:"mb-4 font-bold text-white bg-blue-500 rounded-lg",type:"submit",children:"Login"})]}),Object(w.jsxs)("p",{className:"mb-4",children:["Don't have an account ? ",Object(w.jsx)(y.b,{to:"/signup",className:"h-8 text-center transition rounded-sm hover:text-blue-500",children:"Sign Up"})]})]})]})}}]),r}(s.Component));var C=Object(N.f)(Object(v.b)((function(e){return{authUser:e.authUser}}))(E)),A=(r(70),r(44)),S=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(w.jsx)("ul",{className:"grid gap-4 mt-10 mb-6 justify-items-center",children:this.props.polls?this.props.polls.map((function(t){return Object(w.jsxs)("li",{className:"w-10/12 border-2 rounded-lg",children:[Object(w.jsxs)("section",{className:"authorInfo",children:[Object(w.jsxs)(y.b,{to:"/profile/".concat(t.author._id),className:"authorName",children:[t.author.name," "]}),Object(w.jsx)("p",{children:"\xa0 asks:"})]}),Object(w.jsxs)("section",{className:"grid grid-cols-3 mt-4 mb-4 justify-items-center",children:[Object(w.jsx)("img",{className:"authorImg",alt:t.author.name,src:"https://infinite-sands-21729.herokuapp.com/"+"".concat(t.author.imageUrl)}),Object(w.jsxs)("div",{className:"pollContent",children:[Object(w.jsx)("p",{className:"text-lg font-bold text-center text-gray-700",children:t.title}),Object(w.jsx)("p",{children:t.options.text[0]}),Object(w.jsx)("p",{className:"text-gray-800",children:"or..."}),Object(w.jsxs)("p",{className:"text-gray-800",children:["From: ",A(t.createdAt).format("DD-MM-YYYY hh:mm")]}),Object(w.jsxs)("p",{className:"text-gray-800",children:["Till: ",A(t.pollDuration).format("DD-MM-YYYY hh:mm")]}),Object(w.jsx)("div",{className:"grid w-full text-center justify-items-stretch",children:e.props.authUser.userId?Object(w.jsxs)(s.Fragment,{children:["unAns"===e.props.nav?Object(w.jsx)(y.b,{to:"/polls/poll/".concat(t._id),className:"pollBtn",children:"Vote Poll"}):"Ans"===e.props.nav?Object(w.jsx)(y.b,{to:"/polls/poll/".concat(t._id),className:"pollBtn",children:"Update Vote"}):"",Object(w.jsx)(y.b,{to:"/polls/pollResult/".concat(t._id),className:"pollBtn",children:"Result"})]}):Object(w.jsx)(y.b,{to:"/polls/pollResult/".concat(t._id),className:"pollBtn",children:"Result"})})]})]})]},t._id)})):Object(w.jsx)("h3",{children:"There are No polls here..."})})}}]),r}(s.Component);var T=Object(N.f)(Object(v.b)((function(e){return{authUser:e.authUser}}))(S)),_="RECEIVE_POLLS",D="RECEIVE_AUTH_POLLS",L="SEARCH_POLLS";function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.a)({type:_,loading:t},e)}function F(e,t){return function(r){return fetch("https://infinite-sands-21729.herokuapp.com/polls/"+e+"?page="+t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){r(R(e,!0))})).catch((function(e){console.warn("Error in receiving polls",e),r(R())}))}}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.a)({type:D,loading:t},e)}function M(e,t,r){return function(s){return fetch("https://infinite-sands-21729.herokuapp.com/polls/authPolls/"+e+"?page="+t,{headers:{Authorization:"Bearer "+r},method:"GET"}).then((function(e){return e.json()})).then((function(e){s(B(e,!0))})).catch((function(e){console.warn("Error in receiving polls",e),s(B())}))}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:L,searchLoading:t,polls:e}}var z=r(12),H=r(13),G=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={token:localStorage.getItem("token")},e}return Object(l.a)(r,[{key:"getPage",value:function(e){this.state.token?"out-date"!==this.props.nav?this.props.dispatch(M(this.props.nav,e,this.state.token)):(console.log(this.props.nav),this.props.dispatch(F(this.props.nav,e))):this.state.token||this.props.dispatch(F(this.props.nav,e))}},{key:"render",value:function(){return this.props.pageRange>1?Object(w.jsxs)("div",{className:"flex justify-center gap-5 mb-6",children:[+this.props.currentPage>1?Object(w.jsx)(y.b,{to:this.props.nav?"/?nav=".concat(this.props.nav,"&page=").concat(+this.props.currentPage-1):"/?page=".concat(+this.props.currentPage-1),onClick:this.getPage.bind(this,+this.props.currentPage-1),className:"mt-1",children:Object(w.jsx)(z.a,{icon:H.c,color:"rgba(75, 85, 99)",size:"1x"})}):"",Object(w.jsx)(y.b,{to:this.props.nav?"/?nav=".concat(this.props.nav,"&page=").concat(this.props.currentPage):"/?page=".concat(this.props.currentPage),onClick:this.getPage.bind(this,this.props.currentPage),className:"text-lg font-bold text-gray-600",children:this.props.currentPage}),Object(w.jsx)("p",{className:"text-lg font-bold text-gray-600",children:"/"}),Object(w.jsx)(y.b,{to:this.props.nav?"/?nav=".concat(this.props.nav,"&page=").concat(this.props.paginationArr.length):"/?page=".concat(this.props.paginationArr.length),onClick:this.getPage.bind(this,this.props.paginationArr.length),className:"text-lg font-bold text-gray-600",children:this.props.paginationArr.length}),+this.props.currentPage<this.props.pageRange?Object(w.jsx)(y.b,{to:this.props.nav?"/?nav=".concat(this.props.nav,"&page=").concat(+this.props.currentPage+1):"/?page=".concat(+this.props.currentPage+1),onClick:this.getPage.bind(this,+this.props.currentPage+1),className:"mt-1",children:Object(w.jsx)(z.a,{icon:H.d,color:"rgba(75, 85, 99)",size:"1x"})}):""]}):""}}]),r}(s.Component);var Y=Object(N.f)(Object(v.b)((function(e){return{authUser:e.authUser}}))(G)),W=(r(29),r(19)),J=r.n(W),Q=(r(93),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={token:localStorage.getItem("token")},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.state.token?(this.props.dispatch(M(this.props.nav,this.props.currentPage,this.state.token)),"out-date"===this.props.nav&&this.props.dispatch(F(this.props.nav,this.props.currentPage))):this.state.token||this.props.dispatch(F(this.props.nav,this.props.currentPage))}},{key:"changeTab",value:function(e){var t,r=e.target.innerText;"Answered"===r?t="Ans":"Un Answered"===r?t="unAns":"Outdated Polls"===r?t="out-date":"All Polls"===r&&(t="all"),this.state.token?"out-date"!==t?this.props.dispatch(M(t,1,this.state.token)):this.props.dispatch(F(t,1)):this.state.token||this.props.dispatch(F(t,1))}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"homeContainer",children:[Object(w.jsxs)("nav",{className:"flex flex-row place-content-center rounded-t-md",children:[this.props.authUser.userId?Object(w.jsxs)(s.Fragment,{children:[Object(w.jsx)(y.b,{to:"/?nav=unAns",className:"pollsNav ".concat("unAns"===this.props.nav?"rounded-t-md":"choosenNav"),onClick:this.changeTab.bind(this),children:Object(w.jsx)("p",{className:"pollsNavText",children:"Un Voted Polls"})}),Object(w.jsx)(y.b,{to:"/?nav=Ans",className:"pollsNav ".concat("Ans"===this.props.nav?"rounded-t-md":"choosenNav"),onClick:this.changeTab.bind(this),children:Object(w.jsx)("p",{className:"pollsNavText",children:"Voted Polls"})})]}):Object(w.jsx)(y.b,{to:"/?nav=all",className:"pollsNav bg-white ".concat("all"===this.props.nav?"rounded-t-md":"choosenNav"),onClick:this.changeTab.bind(this),children:Object(w.jsx)("p",{className:"pollsNavText",children:"All Polls"})}),Object(w.jsx)(y.b,{to:"/?nav=out-date",className:"pollsNav ".concat("out-date"===this.props.nav?"rounded-t-md":"choosenNav"),onClick:this.changeTab.bind(this),children:Object(w.jsx)("p",{className:"pollsNavText",children:"Outdated Polls"})})]}),this.props.loading?Object(w.jsxs)("div",{className:"flex flex-col justify-center mt-3 ",children:[Object(w.jsx)(T,{polls:this.props.polls,nav:this.props.nav}),Object(w.jsx)(Y,{pageRange:this.props.pageRange,paginationArr:this.props.paginationArr,nav:this.props.nav,currentPage:this.props.currentPage})]}):Object(w.jsx)("div",{className:"flex justify-center mt-24",children:Object(w.jsx)(J.a,{type:"Oval",color:"#00BFFF",height:80,width:80})})]})}}]),r}(s.Component));var q=Object(N.f)(Object(v.b)((function(e,t){var r=e.authUser,s=e.polls,n=localStorage.getItem("token"),o=t.location.search.match(/(unAns|Ans|out-date)/g),a=t.location.search.match(/(all|out-date)/g),c=n?o?o[0]:"unAns":a?a[0]:"all",l=t.location.search.match(/(\d)/g)?t.location.search.match(/(\d)/g)[0]:1;return{authUser:r,loading:s.loading,polls:s.polls,nav:c,currentPage:l,pageRange:s.pagination?s.pagination.pageRange:"",paginationArr:s.pagination?s.pagination.paginationArr:""}}))(Q)),K="SAVE_ANSWER",X="CREATE_POLL",Z="GET_POLL",$="UPDATE_VOTE",ee="DELETE_VOTE",te="DELETE_POLL";function re(e,t){return function(r){return fetch("https://infinite-sands-21729.herokuapp.com/polls/poll/"+e,{headers:{Authorization:"Bearer "+t},method:"GET"}).then((function(e){return e.json()})).then((function(e){r(function(){return{type:Z,loading:arguments.length>1&&void 0!==arguments[1]&&arguments[1],poll:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(e,!0))})).catch((function(e){console.warn("Error in receiving polls",e)}))}}function se(e){return{type:K,poll:e}}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a.a)({type:X,success:t,firstPage:r},e)}function oe(e){return{type:$,poll:e}}function ae(e,t){return function(r){return fetch("https://infinite-sands-21729.herokuapp.com/polls/poll/delete/"+e,{headers:{Authorization:"Bearer "+t},method:"DELETE"}).then((function(e){return e.json()})).then((function(e){var t;r((t=e,Object(a.a)({type:ee},t)))})).catch((function(e){console.warn("Error in receiving polls",e)}))}}function ce(e){return Object(a.a)({type:te},e)}var le=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(w.jsxs)("div",{className:"mt-20 mb-10 text-center",children:[Object(w.jsxs)("h1",{className:"inline-block h-20 text-red-400 border-2 border-red-400 rounded-lg w-60",children:["Error 404 ",Object(w.jsx)("br",{}),this.props.errorMessage?this.props.errorMessage:"Page Not Found!"]}),Object(w.jsx)("br",{}),this.props.redirect?Object(w.jsx)(y.b,{to:{pathname:"/login",state:{from:this.props.preLocation}},children:Object(w.jsx)("p",{className:"inline-block w-40 mt-10 font-bold text-white bg-blue-400 rounded-lg",children:"Login"})}):""]})}}]),r}(s.Component),ie=Object(v.b)()(le),pe=(r(94),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={answer:null},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.props.dispatch(re(this.props.poll_id,e))}},{key:"saveAnswer",value:function(e){var t=this;e.preventDefault();var r=this.state.answer;if(console.log(r),!r)return alert("You must choose a value");var s=new FormData;s.append("option",r);var n=localStorage.getItem("token");this.props.votedAnswer.length?this.props.dispatch(function(e,t,r){return function(s){return fetch("https://infinite-sands-21729.herokuapp.com/polls/poll/update/"+e,{headers:{Authorization:"Bearer "+r},method:"PUT",body:t}).then((function(e){return e.json()})).then((function(e){s(oe(e))})).catch((function(e){console.warn("Error in receiving polls",e),s(oe())}))}}(this.props.poll_id,s,n)).then((function(e){t.props.errors||t.props.history.push("/")})):this.props.dispatch(function(e,t,r){return function(s){return fetch("https://infinite-sands-21729.herokuapp.com/polls/addVote/"+e,{headers:{Authorization:"Bearer "+r},method:"PUT",body:t}).then((function(e){return e.json()})).then((function(e){s(se(e))})).catch((function(e){console.warn("Error in receiving polls",e),s(se())}))}}(this.props.poll_id,s,n)).then((function(e){t.props.errors||t.props.history.push("/")}))}},{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{children:this.props.authUser.token?this.props.loading?Object(w.jsx)("div",{className:"grid gap-5 mt-10 mb-6 justify-items-center",children:void 0===this.props.poll||this.props.errors?Object(w.jsx)(ie,{errorMessage:"Poll Not Found"}):Object(w.jsxs)("div",{className:"votePollContainer",children:[Object(w.jsxs)("section",{className:"inline-flex w-full h-8 pl-4 bg-gray-200 rounded-t-md",children:[Object(w.jsx)(y.b,{to:"/profile/".concat(this.props.poll.author._id),className:"font-bold text-gray-700 transition hover:text-yellow-50",children:this.props.poll.author.name}),Object(w.jsx)("p",{children:"\xa0 asks:"})]}),Object(w.jsxs)("section",{className:"grid grid-cols-3 mt-4 mb-4 justify-items-center",children:[Object(w.jsx)("img",{className:"authorImage",alt:this.props.poll.author.name,src:"https://infinite-sands-21729.herokuapp.com/"+"".concat(this.props.poll.author.imageUrl)}),Object(w.jsxs)("div",{className:"pollInfoDiv",children:[Object(w.jsx)("p",{className:"font-bold text-center",children:this.props.poll.title}),Object(w.jsxs)("form",{className:"grid w-full grid-flow-row gap-4 justify-items-center",onSubmit:this.saveAnswer.bind(this),children:[this.props.poll.options.text.map((function(t){return Object(w.jsxs)("div",{className:"optionText ".concat(e.state.answer===t?"border-blue-600 text-blue-600":"border-gray-600 text-gray-600"),children:[Object(w.jsx)("input",{type:"radio",name:"option",value:t,onClick:function(t){return e.setState({answer:t.target.value})},defaultChecked:!!e.props.votedAnswer.length&&e.props.votedAnswer[0].option===t}),Object(w.jsx)("label",{children:t}),Object(w.jsx)("br",{})]},t)})),Object(w.jsx)("button",{className:"submitBtn",type:"submit",children:this.props.votedAnswer.length?"Update":"Submit"})]})]})]})]})}):Object(w.jsx)("div",{className:"flex justify-center mt-24",children:Object(w.jsx)(J.a,{type:"Oval",color:"#00BFFF",height:80,width:80})}):Object(w.jsx)(ie,{errorMessage:"Please signin to see this page",redirect:"/",preLocation:this.props.history.location.pathname})})}}]),r}(s.Component));var he=Object(N.f)(Object(v.b)((function(e,t){var r=e.authUser,s=e.poll;return{poll_id:t.match.params.poll_id,authUser:r,loading:s.loading,poll:s.poll,votedAnswer:s.loading&&s.poll?s.poll.options.voters.filter((function(e){return e.voter_Id===r.userId})):null,errors:s.errors}}))(pe)),ue=r(48),de=r.n(ue),je=(r(95),r(44)),be=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.props.dispatch(re(this.props.poll_id,e))}},{key:"setCounter",value:function(){for(var e,t=this.props.poll.options.voters,r=+t.length,s=this.props.poll.options.text,n=+s.length,o={},a=function(n){if(r){var a=t.filter((function(e){return e.option===s[n]}));o[s[n]]=+a.length}o[s[n-1]]&&(e=o[s[n]]>o[s[n-1]]?s[n]:o[s[n]]<o[s[n-1]]?s[n-1]:"")},c=0;c<n;c++)a(c);return{totalVotes:r,optionsCount:o,mostVotedOption:e}}},{key:"render",value:function(){var e=this;if(void 0===this.props.poll||!this.props.loading)return Object(w.jsx)("div",{className:"flex justify-center mt-24",children:Object(w.jsx)(J.a,{type:"Oval",color:"#00BFFF",height:80,width:80})});var t=this.setCounter();return console.log(t.mostVotedOption),Object(w.jsx)("div",{className:"resultsContainer",children:this.props.loading&&this.props.poll?Object(w.jsxs)("div",{className:"grid grid-flow-row",children:[Object(w.jsxs)("h1",{className:"resultTitle",children:["Asked by: ",this.props.poll.author.name]}),Object(w.jsxs)("section",{className:"grid grid-cols-4 gap-6 border-l-2",children:[Object(w.jsx)("img",{className:"w-full col-span-1 mt-2 ml-2 rounded-full",alt:this.props.poll.author.name,src:"https://infinite-sands-21729.herokuapp.com/"+"".concat(this.props.poll.author.imageUrl)}),Object(w.jsxs)("div",{className:"grid col-span-3 border-l-2 border-gray-300",children:[Object(w.jsx)("h1",{className:"m-2 text-xl font-bold text-gray-700",children:"Results:"}),Object(w.jsx)("p",{className:"text-lg font-bold text-center text-gray-700",children:this.props.poll.title}),this.props.poll.options.text.map((function(r){return Object(w.jsxs)("div",{className:"optionResult",children:[e.props.poll.options.voters.filter((function(t){return t.voter_Id===e.props.authUser.userId&&t.option===r})).length?Object(w.jsx)("div",{className:"flex justify-end",children:Object(w.jsxs)("section",{className:"choosenVote",children:[Object(w.jsx)("p",{className:"font-bold text-blue-700",children:"your vote"}),Object(w.jsx)(z.a,{icon:H.b,color:"blue",size:"lg"})]})}):"",Object(w.jsx)("p",{className:"font-bold text-gray-700",children:r}),Object(w.jsx)(de.a,{completed:t.optionsCount[r]?t.optionsCount[r]/t.totalVotes*100:0,bgColor:t.mostVotedOption===r?"rgba(37, 99, 235)":"rgba(55, 65, 81)",labelAlignment:"left",height:"50px",borderRadius:"10px",ariaValuetext:t.optionsCount[r]?t.optionsCount[r]/t.totalVotes*100:0}),Object(w.jsxs)("p",{className:"font-bold text-center text-gray-500",children:[t.optionsCount[r]?t.optionsCount[r]:0," out of ",t.totalVotes," votes"]})]},r)})),this.props.authUser.token&&je(this.props.poll.pollDuration).diff(je().utc())>0?this.props.poll.options.voters.filter((function(t){return t.voter_Id===e.props.authUser.userId})).length?Object(w.jsxs)("div",{className:"flex justify-center",children:[Object(w.jsx)(y.b,{to:"/polls/poll/".concat(this.props.poll._id),className:"w-full resultBtn",children:"Update Vote"}),Object(w.jsx)("button",{className:"w-full resultBtn",onClick:function(){e.props.dispatch(ae(e.props.poll._id,e.props.authUser.token)).then((function(t){e.props.history.push("/")}))},children:"Delete Vote"})]}):Object(w.jsx)(y.b,{to:"/polls/poll/".concat(this.props.poll._id),className:"resultBtn",children:"Vote Poll"}):""]})]})]}):Object(w.jsx)(ie,{errorMessage:"This question is not found!"})})}}]),r}(s.Component);var me=Object(N.f)(Object(v.b)((function(e,t){var r=e.authUser,s=e.poll;return{poll_id:t.match.params.poll_id,authUser:r,loading:s.loading,poll:s.poll}}))(be)),ge=r(28),fe=(r(96),r(44)),Oe=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={numberOfOptions:["option 1","option 2"],title:"",date:"",optionsCount:2,optionsText:[]},e}return Object(l.a)(r,[{key:"setOptionsCounter",value:function(e){for(var t=+e.target.value,r=[],s=1;s<=t;s++)r.push("option ".concat(s));this.setState({numberOfOptions:r,optionsCount:t})}},{key:"saveNewPoll",value:function(e){var t=this;e.preventDefault();var r,s,n=new FormData;for(n.append("title",this.state.title),n.append("date",this.state.date),n.append("optionsCount",this.state.optionsCount),n.append("offset",fe().utcOffset()),n.append("optionsText",this.state.optionsText);this.state.optionsText.length;)this.state.optionsText.pop();this.props.dispatch((r=n,s=this.props.authUser.token,function(e){return fetch("https://infinite-sands-21729.herokuapp.com/polls/addPoll",{headers:{Authorization:"Bearer "+s},method:"PUT",body:r}).then((function(e){return e.json()})).then((function(t){t.errors&&e(ne(t,!1))})).catch((function(e){console.warn("Error in saving the answer",e)}))})).then((function(e){t.props.polls.errors||t.props.history.push("/")}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"newPollContainer",children:[Object(w.jsx)(k,{error:this.props.polls.errors,errorMsg:this.props.polls.errors?this.props.polls.errors.msg:""}),this.props.authUser.userId?Object(w.jsxs)("div",{className:"grid grid-flow-row gap-4 justify-items-center",children:[Object(w.jsx)("h2",{className:"newPollTitle",children:"Create New Question"}),Object(w.jsxs)("form",{className:"grid w-2/3 grid-flow-row gap-5",onSubmit:this.saveNewPoll.bind(this),children:[Object(w.jsxs)("div",{className:"flex h-8 gap-8 rounded-lg flex-inline ring-2 ring-gray-300",children:[Object(w.jsx)("p",{className:"font-bold text-gray-700",children:"Number of poll options: "}),Object(w.jsxs)("select",{onChange:this.setOptionsCounter.bind(this),children:[Object(w.jsx)("option",{children:"2"}),Object(w.jsx)("option",{children:"3"}),Object(w.jsx)("option",{children:"4"}),Object(w.jsx)("option",{children:"5"})]})]}),Object(w.jsx)("input",{name:"title",type:"text",className:"newPollInput",placeholder:"Enter poll title",onBlur:function(t){return e.setState({title:t.target.value})}}),Object(w.jsx)("label",{htmlFor:"timer",className:"font-bold text-gray-700",children:"Set poll days:"}),Object(w.jsx)("input",{name:"timer",className:"newPollInput",type:"datetime-local",min:fe().format(fe.HTML5_FMT.DATETIME_LOCAL),onChange:function(t){return e.setState({date:t.target.value})}}),Object(w.jsx)("hr",{}),this.state.numberOfOptions.map((function(e){return Object(w.jsxs)(s.Fragment,{children:[Object(w.jsx)("input",{name:e,className:"newPollInput",placeholder:"Enter ".concat(e," text here")}),Object(w.jsx)("hr",{})]},e)})),Object(w.jsx)("button",{className:"h-8 mb-4 font-bold text-white bg-blue-500 rounded-lg",type:"submit",onClick:function(){return Object(ge.a)(document.getElementsByClassName("option")).map((function(t){return e.state.optionsText.push(t.value)}))},children:"Submit"})]})]}):Object(w.jsx)(ie,{errorMessage:"Please signin to see this page",redirect:"/",preLocation:this.props.history.location.pathname})]})}}]),r}(s.Component);var xe=Object(N.f)(Object(v.b)((function(e){return{authUser:e.authUser,polls:e.polls}}))(Oe)),ve="GET_USER",ye="GET_LEADER_BOARD";function Ne(e){return function(t){return fetch("https://infinite-sands-21729.herokuapp.com/auth/user/"+e,{method:"GET"}).then((function(e){return e.json()})).then((function(e){t(function(){return{type:ve,userLoading:arguments.length>1&&void 0!==arguments[1]&&arguments[1],results:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(e,!0))})).catch((function(e){console.warn("Error in getting the user",e)}))}}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:ye,leaderLoading:t,results:e}}r(97);var Ue=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.dispatch((function(e){return fetch("https://infinite-sands-21729.herokuapp.com/auth/leader-board",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e(we(t,!0))})).catch((function(t){e(we({},!1)),console.warn("Error in getting the user",t)}))}))}},{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{className:"BoardContainer",children:Object(w.jsxs)("ul",{className:"flex flex-col gap-4 m-4",children:[Object(w.jsx)("h1",{className:"text-xl font-bold text-center text-gray-700",children:"Top Voters"}),this.props.loading?this.props.users.map((function(t){return Object(w.jsxs)("li",{className:"grid grid-cols-4 border-2 border-gray-300 rounded-md",children:[Object(w.jsxs)("section",{className:"flex flex-col col-span-1 gap-2 m-2",children:[Object(w.jsx)(z.a,{icon:H.h,color:e.props.users[0]===t?"yellow":e.props.users[1]===t?"gray":"rgba(180, 83, 9)",size:"lg"}),Object(w.jsx)("img",{className:"rounded-full",alt:t.name,src:"https://infinite-sands-21729.herokuapp.com/"+"".concat(t.imageUrl)})]}),Object(w.jsxs)("section",{className:"flex flex-col col-span-2 gap-4 p-2 m-2 border-l-2 border-gray-300",children:[Object(w.jsx)(y.b,{to:"/profile/".concat(t._id),className:"font-bold text-gray-900 transition hover:text-gray-400",children:t.name}),Object(w.jsxs)("div",{className:"flex flex-row justify-between font-bold text-gray-700",children:[Object(w.jsx)("p",{children:"Answered Polls"}),Object(w.jsx)("p",{children:t.votedPolls})]}),Object(w.jsxs)("div",{className:"flex flex-row justify-between font-bold text-gray-700",children:[Object(w.jsx)("p",{children:"Created Polls"}),Object(w.jsx)("p",{children:t.createdPolls})]})]}),Object(w.jsx)("section",{className:"col-span-1 p-2 m-2 text-center border-l-2 border-gray-300",children:Object(w.jsxs)("div",{className:"flex flex-col items-stretch h-full gap-4 border-2 border-gray-300 rounded-md",children:[Object(w.jsx)("p",{className:"self-center w-full font-bold text-gray-700 bg-gray-300 h-1/3 rounded-t-md",children:"Score"}),Object(w.jsx)("p",{className:"self-center w-8 h-8 text-lg font-bold text-white bg-blue-500 rounded-full",children:t.score})]})})]},t._id)})):Object(w.jsx)("div",{className:"flex justify-center mt-24",children:Object(w.jsx)(J.a,{type:"Oval",color:"#00BFFF",height:80,width:80})})]})})}}]),r}(s.Component);var ke=Object(N.f)(Object(v.b)((function(e){var t=e.authUser,r=e.user;return{authUser:t,users:r.LeaderBoardUsers,loading:r.leaderLoading}}))(Ue)),Pe=r(26),Ie=(r(30),r(98),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(w.jsx)(Pe.a,{modal:!0,className:"setItems",nested:!0,trigger:Object(w.jsx)("button",{className:"text-gray-800 border-b-2 border-gray-400 hover:text-gray-500",children:"Edit Profile"}),children:function(t){return Object(w.jsxs)("div",{className:"grid grid-flow-row",children:[Object(w.jsx)("button",{className:"close justify-self-end",onClick:t,children:Object(w.jsx)(z.a,{icon:H.g,color:"gray",size:"lg",className:"cursor-pointer justify-self-end"})}),Object(w.jsx)(k,{error:e.props.authUser.errors,errorMsg:e.props.authUser.errors?e.props.authUser.errors.msg:""}),Object(w.jsxs)("form",{method:"post",id:"form",className:"grid grid-flow-row gap-5",onSubmit:e.props.updateUserForm,children:[Object(w.jsx)("p",{className:"text-lg font-bold text-center text-gray-700",children:"Edit Profile"}),Object(w.jsx)("input",{className:"popupInput",name:"name",type:"text",placeholder:"Enter your name",defaultValue:e.props.authUser.name}),Object(w.jsx)("input",{className:"popupInput",name:"email",type:"email",placeholder:"Enter a valid email adress",defaultValue:e.props.authUser.email}),Object(w.jsx)("label",{htmlFor:"imageUrl",className:"font-bold text-gray-700",children:"Select an image"}),Object(w.jsx)("input",{className:"popupImageInput",name:"imageUrl",id:"imageUrl",type:"file",placeholder:"image Url"}),Object(w.jsx)("button",{className:"h-8 mb-4 font-bold text-white bg-blue-500 rounded-lg",type:"submit",children:"Update"})]})]})}})}}]),r}(s.Component));var Ee=Object(v.b)((function(e){return{authUser:e.authUser}}))(Ie),Ce=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(w.jsx)(Pe.a,{modal:!0,className:"setItems",nested:!0,trigger:Object(w.jsx)("button",{className:"text-gray-800 border-b-2 border-gray-400 hover:text-gray-500",children:"Change Password"}),children:function(t){return Object(w.jsxs)("div",{className:"grid grid-flow-row",children:[Object(w.jsx)("button",{className:"close justify-self-end",onClick:t,children:Object(w.jsx)(z.a,{icon:H.g,color:"gray",size:"lg",className:"cursor-pointer justify-self-end"})}),Object(w.jsx)(k,{error:e.props.authUser.errors,errorMsg:e.props.authUser.errors?e.props.authUser.errors.msg:""}),Object(w.jsxs)("form",{method:"post",id:"form",className:"grid grid-flow-row gap-5",onSubmit:e.props.changePasswordForm,children:[Object(w.jsx)("p",{className:"text-lg font-bold text-center text-gray-700",children:"Change Password"}),Object(w.jsx)("input",{className:" popupInput",name:"oldPassword",type:"password",placeholder:"Enter old password"}),Object(w.jsx)("input",{className:" popupInput",name:"newPassword",type:"password",placeholder:"Enter new password"}),Object(w.jsx)("input",{className:" popupInput",name:"confirmPassword",type:"password",placeholder:"Confirm your password"}),Object(w.jsx)("button",{className:"h-8 mb-4 font-bold text-white bg-blue-500 rounded-lg",type:"submit",children:"Update"})]})]})}})}}]),r}(s.Component);var Ae=Object(v.b)((function(e){return{authUser:e.authUser}}))(Ce),Se=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(w.jsx)(Pe.a,{modal:!0,className:"setItems",nested:!0,trigger:Object(w.jsx)("button",{className:"text-gray-800 hover:text-gray-500",children:"Delete Account"}),children:function(t){return Object(w.jsxs)("div",{className:"grid grid-flow-row",children:[Object(w.jsx)("button",{className:"close justify-self-end",onClick:t,children:Object(w.jsx)(z.a,{icon:H.g,color:"gray",size:"lg",className:"cursor-pointer justify-self-end"})}),Object(w.jsx)(k,{error:e.props.authUser.errors,errorMsg:e.props.authUser.errors?e.props.authUser.errors.msg:""}),Object(w.jsxs)("form",{method:"post",id:"form",className:"grid grid-flow-row gap-5",onSubmit:e.props.deleteUser,children:[Object(w.jsx)("p",{className:"text-lg font-bold text-center text-gray-700",children:"Delete Account"}),Object(w.jsx)("input",{className:"popupInput",name:"password",type:"password",placeholder:"Enter your password"}),Object(w.jsx)("button",{className:"h-8 mb-4 font-bold text-white bg-blue-500 rounded-lg",type:"submit",children:"Delete"})]})]})}})}}]),r}(s.Component);var Te=Object(v.b)((function(e){return{authUser:e.authUser}}))(Se),_e=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"flex flex-col justify-start gap-2 pb-4 mt-4 border-b-2 border-gray-500",children:[Object(w.jsxs)("p",{className:"ml-2 mr-2 text-lg font-bold text-center text-gray-700 border-2 border-gray-500 rounded-md ",children:[this.props.pollType," Polls:    ",this.props.polls.length]}),Object(w.jsx)("div",{className:"grid grid-cols-2",children:this.props.polls.map((function(t){return Object(w.jsxs)("div",{className:"grid grid-flow-row gap-2 m-2 text-center border-2 border-gray-300 rounded-lg",children:[Object(w.jsx)("p",{className:"font-bold text-gray-700",children:t.title}),Object(w.jsx)(y.b,{to:"/polls/pollResult/".concat(t._id),className:"w-2/4 h-8 text-center text-white bg-blue-500 border-2 border-blue-200 rounded-full justify-self-center",children:"Result"}),e.props.authUser.userId===t.author._id&&"Created"===e.props.pollType?Object(w.jsx)("button",{className:"w-2/4 h-8 mb-1 text-center text-white bg-blue-500 border-2 border-blue-200 rounded-full justify-self-center",onClick:function(){e.props.deletePoll(t._id)},children:"Delete"}):""]},t._id)}))})]})}}]),r}(s.Component);var De=Object(v.b)((function(e){return{authUser:e.authUser}}))(_e),Le=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={showFrom:"hidden",token:localStorage.getItem("token")},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.dispatch(Ne(this.props.userId))}},{key:"updateUserForm",value:function(e){var t=this;e.preventDefault();var r,s,n=new FormData(e.target);this.props.dispatch((r=n,s=this.state.token,function(e){return fetch("https://infinite-sands-21729.herokuapp.com/auth/user/update",{headers:{Authorization:"Bearer "+s},method:"POST",body:r}).then((function(e){return e.json()})).then((function(t){e(f(t))})).catch((function(t){console.warn("Error in updating the user",t),e(f({}))}))})).then((function(e){t.props.authUser.errors||(t.props.logoutHandler(),t.props.history.push("/login"))}))}},{key:"changePasswordForm",value:function(e){var t=this;e.preventDefault();var r=new FormData(e.target);this.props.dispatch(O(r,this.state.token)).then((function(e){t.props.authUser.errors||(t.props.logoutHandler(),t.props.history.push("/login"))}))}},{key:"deleteUser",value:function(e){var t=this;e.preventDefault();var r=new FormData(e.target);this.props.dispatch(x(r,this.state.token)).then((function(e){t.props.authUser.errors||(t.props.logoutHandler(),t.props.history.push("/signup"))}))}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(w.jsx)("div",{className:"w-full m-auto mt-12 mb-10 align-middle border-2 border-gray-400 rounded-md md:w-2/3",children:this.props.errors?Object(w.jsx)(ie,{errorMessage:"User is not found!"}):this.props.loading?Object(w.jsxs)("div",{className:"grid grid-flow-row",children:[Object(w.jsxs)("div",{className:"grid h-20 grid-flow-col bg-gray-200 border-b-2 border-gray-500 rounded-t-md",children:[Object(w.jsxs)("section",{className:"grid grid-flow-col",children:[Object(w.jsx)("img",{className:"w-16 mt-2 ml-2 border-2 border-blue-200 rounded-full",alt:this.props.user.name,src:"https://infinite-sands-21729.herokuapp.com/"+"".concat(this.props.user.imageUrl)}),Object(w.jsx)("p",{className:"mt-5 text-lg font-bold text-gray-700",children:this.props.user.name})]}),Object(w.jsxs)("section",{className:"grid grid-flow-col",children:[Object(w.jsxs)("p",{className:"mt-5 mb-5 text-lg font-bold text-gray-700 border-2 border-gray-500 rounded-md justify-self-end",children:["Score: ",+this.props.user.votedPolls.length+ +this.props.user.createdPolls.length]}),this.props.authUser.token?Object(w.jsx)(Pe.a,{position:"bottom center",nested:!0,trigger:Object(w.jsx)("button",{children:Object(w.jsx)(z.a,{className:"self-center cursor-pointer",icon:H.e,color:"gray",size:"2x"})}),children:Object(w.jsxs)("div",{className:"flex flex-col gap-1",children:[Object(w.jsx)(Ee,{updateUserForm:this.updateUserForm.bind(this)}),Object(w.jsx)(Ae,{changePasswordForm:this.changePasswordForm.bind(this)}),Object(w.jsx)(Te,{deleteUser:this.deleteUser.bind(this)})]})}):""]})]}),Object(w.jsx)(De,{pollType:"Voted",polls:this.props.votedPolls}),Object(w.jsx)(De,{pollType:"Created",polls:this.props.createdPolls,deletePoll:function(t){e.props.dispatch(function(e,t){return function(r){return fetch("https://infinite-sands-21729.herokuapp.com/polls/poll/deletePoll/"+e,{headers:{Authorization:"Bearer "+t},method:"DELETE"}).then((function(e){return e.json()})).then((function(e){r(ce(e))})).catch((function(e){console.warn("Error in receiving polls",e),r(ce())}))}}(t,e.props.authUser.token))}})]}):Object(w.jsx)("div",{className:"flex justify-center mt-24",children:Object(w.jsx)(J.a,{type:"Oval",color:"#00BFFF",height:80,width:80})})})}}]),r}(s.Component);var Re=Object(N.f)(Object(v.b)((function(e,t){var r=e.authUser,s=e.user,n=t.match.params.user_id;return{authUser:r,loading:s.userLoading,user:s.user,createdPolls:s.createdPolls,votedPolls:s.votedPolls,userId:n,errors:s.errors,message:r}}))(Le)),Fe=(r(99),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{className:"searchIcon",children:Object(w.jsx)(Pe.a,{modal:!0,className:"setItems",nested:!0,trigger:Object(w.jsx)("button",{children:Object(w.jsx)(z.a,{icon:H.f,color:"gray",size:"1x",className:"self-center"})}),children:function(t){return Object(w.jsxs)("div",{className:"grid grid-flow-row gap-2",children:[Object(w.jsx)("button",{className:"close justify-self-end",onClick:t,children:Object(w.jsx)(z.a,{icon:H.g,color:"gray",size:"lg",className:"cursor-pointer justify-self-end"})}),Object(w.jsx)("p",{className:"text-lg font-bold text-center text-gray-700",children:"Search for poll"}),Object(w.jsx)("input",{className:"searchInput",placeholder:"Enter poll title..",onChange:e.props.resultDiv}),Object(w.jsxs)("div",{className:"resultDiv ".concat(e.props.showResult),children:[Object(w.jsxs)("h1",{className:"col-span-2",children:["Search results: ",e.props.searchPolls?e.props.searchPolls.length:0]}),e.props.searchLoading&&e.props.searchPolls?e.props.searchPolls.map((function(e){return Object(w.jsxs)("div",{className:"pollDiv",children:[Object(w.jsx)("p",{className:"mt-2 font-bold text-gray-700",children:e.title}),Object(w.jsx)(y.b,{to:"/polls/pollResult/".concat(e._id),className:"resultLink",children:"Result"})]},e._id)})):Object(w.jsx)("div",{className:"col-span-2 h-28 ".concat(e.props.showResult),children:Object(w.jsx)(J.a,{type:"Oval",color:"#00BFFF",height:80,width:80})})]})]})}})})}}]),r}(s.Component)),Be=Fe,Me=(r(100),function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={showResult:"hidden",smNav:"hidden",barsRotation:0},e}return Object(l.a)(r,[{key:"resultDiv",value:function(e){var t,r,s=e.target.value;t=s?"":"hidden",this.props.dispatch((r=s,function(e){return fetch("https://infinite-sands-21729.herokuapp.com/polls/search/"+r,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e(V(t,!0))})).catch((function(t){console.warn("Error in receiving polls",t),e(V())}))})),this.setState({showResult:t})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(s.Fragment,{children:[Object(w.jsxs)("nav",{className:"grid w-full h-16 grid-flow-col bg-blue-900",children:[Object(w.jsxs)("ul",{className:"grid w-full h-8 grid-flow-col gap-1 mt-6 ml-6 auto-cols-min",children:[Object(w.jsx)(z.a,{icon:H.a,color:"gray",size:"lg",rotation:this.state.barsRotation,className:"transition duration-500 cursor-pointer sm:hidden",onClick:function(){return e.setState({smNav:"hidden"===e.state.smNav?"":"hidden",barsRotation:0===e.state.barsRotation?90:0})}}),Object(w.jsx)(y.c,{to:"/",className:"navItem w-20 ".concat("/"===this.props.currentUrl?"text-yellow-200":"text-gray-300"),children:"Home"}),Object(w.jsx)(y.c,{to:"/add",className:"navItem w-36 ".concat("/add"===this.props.currentUrl?"text-yellow-200":"text-gray-300"),children:"New Poll"}),Object(w.jsx)(y.c,{to:"/leaderboard",className:"navItem w-36 ".concat("/leaderboard"===this.props.currentUrl?"text-yellow-200":"text-gray-300"),children:"Leader Board"})]}),Object(w.jsxs)("div",{className:"grid w-full h-8 grid-flow-col ",children:[this.props.authUser.userId?Object(w.jsxs)("div",{className:"flex justify-end",children:[Object(w.jsxs)(y.c,{to:"/profile/".concat(this.props.authUser.userId),className:"flex flex-row gap-2 mt-6",children:[Object(w.jsx)("p",{className:"transition hover:text-yellow-100",children:this.props.authUser.name}),Object(w.jsx)("img",{className:"w-8 h-8 rounded-full",alt:this.props.authUser.name,src:"https://infinite-sands-21729.herokuapp.com/"+"".concat(this.props.authUser.imageUrl)})]}),Object(w.jsx)("div",{id:"logout",className:"mt-6",children:Object(w.jsx)("p",{className:"w-20 logLink",onClick:this.props.logoutHandler,children:Object(w.jsx)(y.c,{to:"/",children:"Logout"})})})]}):Object(w.jsxs)("div",{className:"flex justify-center gap-4 mt-6 sm:justify-end",children:[Object(w.jsx)(y.c,{to:"/login",className:"h-8 logLink",children:"Login"}),Object(w.jsx)(y.c,{to:"/signup",className:"h-8 logLink",children:"Signup"})]}),Object(w.jsx)(Be,{showResult:this.state.showResult,searchPolls:this.props.searchPolls,searchLoading:this.props.searchLoading,resultDiv:this.resultDiv.bind(this)})]})]}),Object(w.jsxs)("div",{className:"flex flex-col mt-2 sm:hidden ".concat(this.state.smNav),children:[Object(w.jsx)(y.c,{to:"/",className:"smNav w-20 ".concat("/"===this.props.currentUrl?"border-l-4":""),children:"Home"}),Object(w.jsx)(y.c,{to:"/add",className:"smNav w-36 ".concat("/add"===this.props.currentUrl?"border-l-4":""),children:"New Question"}),Object(w.jsx)(y.c,{to:"/leaderboard",className:"smNav w-36 ".concat("/leaderboard"===this.props.currentUrl?"border-l-4":""),children:"Leader Board"})]})]})}}]),r}(s.Component));var Ve=Object(N.f)(Object(v.b)((function(e,t){var r=e.authUser,s=e.polls,n=t.location.pathname;return{authUser:r,searchPolls:s.searchLoading?s.searchPolls.searchPolls:[],searchLoading:s.searchLoading,currentUrl:n}}))(Me)),ze=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"flex items-stretch w-full h-full",children:Object(w.jsx)("div",{className:"self-end w-full h-20 align-bottom bg-blue-900",children:Object(w.jsx)("h1",{className:"text-center text-white",children:"Voting App"})})})}}]),r}(s.Component),He=Object(v.b)()(ze),Ge=r(53),Ye=function(e){Object(i.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).logoutHandler=function(){localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),localStorage.removeItem("userId"),localStorage.removeItem("name"),localStorage.removeItem("email"),localStorage.removeItem("imageUrl"),e.props.dispatch(m({}))},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.setLoginSession(),Object(Ge.a)("http://localhost:8080").on("polls",(function(t){e.props.authUser.userId!==t.poll.author._id&&"createPoll"===t.action&&(e.props.location.search&&"?nav=unAns"!==e.props.location.search&&"?nav=unAns&page=1"!==e.props.location.search?+e.props.location.search.match(/(\d)/g)>1&&e.props.location.search.match(/(unAns)/g)&&e.props.dispatch(ne({poll:t.poll},!0,!1)):e.props.dispatch(ne({poll:t.poll},!0,!0)))}))}},{key:"setLoginSession",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");if(e&&t)if(new Date(t)<=new Date)this.logoutHandler();else{var r=new Date(t).getTime()-(new Date).getTime(),s=localStorage.getItem("userId"),n=localStorage.getItem("name"),o=localStorage.getItem("email"),a=localStorage.getItem("imageUrl");this.props.dispatch(m({userId:s,token:e,name:n,email:o,imageUrl:a})),this.setAutoLogout(r)}else this.props.dispatch(m({}))}},{key:"setAutoLogout",value:function(e){var t=this;setTimeout((function(){t.logoutHandler()}),e)}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"h-screen",children:[Object(w.jsx)(Ve,{logoutHandler:this.logoutHandler.bind(this)}),Object(w.jsxs)(N.c,{children:[Object(w.jsx)(N.a,{exact:!0,path:"/",component:q}),Object(w.jsx)(N.a,{exact:!0,path:"/signup",component:I}),Object(w.jsx)(N.a,{exact:!0,path:"/login",component:C}),Object(w.jsx)(N.a,{exact:!0,path:"/profile/:user_id",render:function(t){return Object(w.jsx)(Re,Object(a.a)(Object(a.a)({},t),{},{logoutHandler:e.logoutHandler.bind(e)}))}}),Object(w.jsx)(N.a,{exact:!0,path:"/polls/poll/:poll_id",component:he}),Object(w.jsx)(N.a,{exact:!0,path:"/polls/pollResult/:poll_id",component:me}),Object(w.jsx)(N.a,{exact:!0,path:"/add",component:xe}),Object(w.jsx)(N.a,{exact:!0,path:"/leaderboard",component:ke}),Object(w.jsx)(N.a,{component:ie})]}),Object(w.jsx)(He,{})]})}}]),r}(s.Component);var We=Object(N.f)(Object(v.b)((function(e){return{authUser:e.authUser,polls:e.polls}}))(Ye)),Je=r(34),Qe={polls:[],pagination:{paginationArr:[],pageRange:0,loading:!1,totalItems:0,perPage:2}};var qe={createdPolls:[],user:{},votedPolls:[]};var Ke=Object(Je.b)({poll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(a.a)(Object(a.a)(Object(a.a)({},e),t.poll),{},{loading:t.loading});case K:case $:case ee:return Object(a.a)(Object(a.a)({},e),t.poll);default:return e}},polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{polls:t.polls,pagination:{polls:t.polls,paginationArr:t.paginationArr,pageRange:t.pageRange,loading:t.loading,totalItems:t.totalItems,perPage:t.perPage},loading:t.loading};case X:var r=[];if(t.poll&&(t.firstPage&&e.polls.unshift(t.poll),e.pagination.totalItems>=e.pagination.perPage)){t.firstPage&&e.polls.pop();for(var s=1;s<=Math.ceil((e.pagination.totalItems+1)/e.pagination.perPage);s++)r.push(s)}var n=+r.length;return Object(a.a)(Object(a.a)({},e),{},{polls:Object(ge.a)(e.polls),errors:t.errors,success:t.success,pagination:Object(a.a)(Object(a.a)({},e.pagination),{},{paginationArr:r,pageRange:n,totalItems:e.pagination.totalItems+1})});case D:return{polls:t.polls,pagination:{paginationArr:t.paginationArr,pageRange:t.pageRange,loading:t.loading,totalItems:t.totalItems,perPage:t.perPage},loading:t.loading};case L:return Object(a.a)(Object(a.a)({},e),{},{searchPolls:t.polls,searchLoading:t.searchLoading});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(a.a)(Object(a.a)({},e),{},{userLoading:t.userLoading},t.results);case ye:return Object(a.a)(Object(a.a)({},e),{},{leaderLoading:t.leaderLoading},t.results);case te:return Object(a.a)(Object(a.a)({},e),{},{createdPolls:Object(ge.a)(e.createdPolls.filter((function(e){return e._id!==t.poll_Id}))),votedPolls:Object(ge.a)(e.votedPolls.filter((function(e){return e._id!==t.poll_Id}))),user:Object(a.a)(Object(a.a)({},e.user),{},{createdPolls:e.createdPolls.filter((function(e){return e._id!==t.poll_Id})),votedPolls:e.votedPolls.filter((function(e){return e._id!==t.poll_Id}))})});default:return e}},authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{userId:t.userId,token:t.token,name:t.name,email:t.email,imageUrl:t.imageUrl,errors:t.errors};case j:return{userId:t.userId,errors:t.errors};case u:case b:case d:return Object(a.a)(Object(a.a)({},e),{},{message:t.message,errors:t.errors});default:return e}}}),Xe=r(52),Ze=Object(Je.a)(Xe.a,(function(e){return function(t){return function(r){console.group(r.type),console.log("The action: ",r);var s=t(r);return console.log("The new State: ",e.getState()),console.groupEnd(),s}}})),$e=Object(Je.c)(Ke,Ze);o.a.render(Object(w.jsx)(v.a,{store:$e,children:Object(w.jsx)(y.a,{children:Object(w.jsx)(We,{})})}),document.getElementById("root"))},58:function(e,t,r){},65:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},93:function(e,t,r){},94:function(e,t,r){},95:function(e,t,r){},96:function(e,t,r){},97:function(e,t,r){},98:function(e,t,r){},99:function(e,t,r){}},[[105,1,2]]]);
//# sourceMappingURL=main.7716206b.chunk.js.map